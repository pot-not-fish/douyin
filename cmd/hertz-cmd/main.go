/*
 * @Author: LIKE_A_STAR
 * @Date: 2023-11-10 17:28:27
 * @LastEditors: LIKE_A_STAR
 * @LastEditTime: 2024-02-22 18:47:26
 * @Description:
 * @FilePath: \vscode programd:\vscode\goWorker\src\douyin\cmd\hertz-cmd\main.go
 */
// Code generated by hertz generator.

package main

import (
	"douyin/internal/pkg/kitex_client"
	"douyin/internal/pkg/mq"
	"douyin/internal/pkg/mw"
	"douyin/internal/pkg/parse"

	"github.com/cloudwego/hertz/pkg/app/server"
	"github.com/hertz-contrib/gzip"
)

func main() {
	parse.Init("../../deployment/config/config.yaml")

	mw.InitJwt()

	kitex_client.Init()

	mq.Init()
	mq.PublishSimple("favorite")
	mq.PublishSimple("follow")

	h := server.Default(
		server.WithHostPorts("0.0.0.0:8888"),
		server.WithMaxRequestBodySize(50*1024*1024),
	)

	h.Use(gzip.Gzip(gzip.BestCompression))

	register(h)
	h.Spin()
}
